{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabai-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export default function searchImagesByQuery(query, page) {\n  const URL = 'https://pixabay.com/api/';\n  const API_KEY = '45506482-0746cd613ccb32219c9653431';\n\n  return fetch(\n    `${URL}?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}`\n  )\n  .then(response => {\n      if (!response.ok) {\n        throw new Error(`Error ${response.status}: ${response.statusText}`);\n      }\n      return response.json(); \n  })\n  .then(data => {\n      if (data.hits.length === 0) {\n        throw new Error('No images found.');\n      }\n      return data; \n  })\n  .catch(error => {\n      iziToast.error({\n        position: 'topRight',\n        message: `An error occurred: ${error.message}`,  \n      });\n      throw error; \n  });\n}","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet lightbox;\n\nexport function createImages(data) {\n  const list = document.querySelector('.gallery-list');\n  const images = data.hits\n    .map(\n      hit => `\n        <div class=\"image-frame\">\n          <a href=\"${hit.largeImageURL}\">\n            <img class=\"image\" src=\"${hit.webformatURL}\" alt=\"${hit.tags}\" />\n          </a>\n          <div class=\"text-wrapper\">\n            <div class=\"text-block\">\n              <h5>Likes</h5><p>${hit.likes}</p>\n            </div>\n            <div class=\"text-block\">\n              <h5>Views</h5><p>${hit.views}</p>\n            </div>\n            <div class=\"text-block\">\n              <h5>Comments</h5><p>${hit.comments}</p>\n            </div>\n            <div class=\"text-block\">\n              <h5>Downloads</h5><p>${hit.downloads}</p>\n            </div>\n          </div>\n        </div>`\n    )\n    .join('');\n  list.insertAdjacentHTML('afterbegin', images);\n  lightbox.refresh(); \n}\n\nexport function clearImages() {\n  const list = document.querySelector('.gallery-list');\n  list.innerHTML = '';\n}\n\nexport function initLightbox() {\n  lightbox = new SimpleLightbox('.gallery-list a', {\n    captions: true,\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport searchImagesByQuery from './js/pixabai-api.js';\nimport { createImages, clearImages, initLightbox } from './js/render-functions.js';\n\nconst form = document.querySelector('.gallery-form');\nconst input = document.querySelector('.input-for-gallery');\nconst loader = document.querySelector('.loader');\n\nlet lightbox;\n\nform.addEventListener('submit', handleSubmit);\n\nfunction handleSubmit(event) {\n  clearImages();\n  event.preventDefault();\n  loader.classList.add('active');  \n\n  const wordForSearch = input.value.trim();\n  const page = 1;\n\n  if (wordForSearch === '') {\n    iziToast.error({\n      position: 'topRight',\n      message: 'Please fill the input',\n    });\n    loader.classList.remove('active'); \n    return;\n  }\n\n  searchImagesByQuery(wordForSearch, page)\n    .then(data => {\n      if (data.total === 0) {\n        iziToast.error({\n          position: 'topRight',\n          message: 'Sorry, there are no images matching your search query. Please try again!',\n        });\n        loader.classList.remove('active');  \n        return;\n      } else {\n        createImages(data);\n        iziToast.success({\n          position: 'topRight',\n          message: `Found ${data.total} images.`,\n        });\n\n        if (!lightbox) {\n          lightbox = initLightbox();\n        } else {\n          lightbox.refresh(); \n        }\n      }\n    })\n    .catch(error => {\n      iziToast.error({\n        position: 'topRight',\n        message: `An error occurred: ${error.message}`,\n      });\n    })\n    .finally(() => {\n      loader.classList.remove('active'); \n    });\n}\n\nlightbox = initLightbox();"],"names":["searchImagesByQuery","query","page","response","data","error","lightbox","createImages","list","images","hit","clearImages","initLightbox","SimpleLightbox","form","input","loader","handleSubmit","event","wordForSearch","iziToast"],"mappings":"6vBAAe,SAASA,EAAoBC,EAAOC,EAAM,CAIvD,OAAO,MACL,qEAA2BD,CAAK,iEAAiEC,CAAI,EACtG,EACA,KAAKC,GAAY,CACd,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAM,SAASA,EAAS,MAAM,KAAKA,EAAS,UAAU,EAAE,EAEpE,OAAOA,EAAS,MACtB,CAAG,EACA,KAAKC,GAAQ,CACV,GAAIA,EAAK,KAAK,SAAW,EACvB,MAAM,IAAI,MAAM,kBAAkB,EAEpC,OAAOA,CACb,CAAG,EACA,MAAMC,GAAS,CACZ,eAAS,MAAM,CACb,SAAU,WACV,QAAS,sBAAsBA,EAAM,OAAO,EACpD,CAAO,EACKA,CACZ,CAAG,CACH,CCvBA,IAAIC,EAEG,SAASC,EAAaH,EAAM,CACjC,MAAMI,EAAO,SAAS,cAAc,eAAe,EAC7CC,EAASL,EAAK,KACjB,IACCM,GAAO;AAAA;AAAA,qBAEQA,EAAI,aAAa;AAAA,sCACAA,EAAI,YAAY,UAAUA,EAAI,IAAI;AAAA;AAAA;AAAA;AAAA,iCAIvCA,EAAI,KAAK;AAAA;AAAA;AAAA,iCAGTA,EAAI,KAAK;AAAA;AAAA;AAAA,oCAGNA,EAAI,QAAQ;AAAA;AAAA;AAAA,qCAGXA,EAAI,SAAS;AAAA;AAAA;AAAA,eAI7C,EACA,KAAK,EAAE,EACVF,EAAK,mBAAmB,aAAcC,CAAM,EAC5CH,EAAS,QAAO,CAClB,CAEO,SAASK,GAAc,CAC5B,MAAMH,EAAO,SAAS,cAAc,eAAe,EACnDA,EAAK,UAAY,EACnB,CAEO,SAASI,GAAe,CAC7BN,EAAW,IAAIO,EAAe,kBAAmB,CAC/C,SAAU,GACV,aAAc,MACd,aAAc,GAClB,CAAG,CACH,CCzCA,MAAMC,EAAO,SAAS,cAAc,eAAe,EAC7CC,EAAQ,SAAS,cAAc,oBAAoB,EACnDC,EAAS,SAAS,cAAc,SAAS,EAE/C,IAAIV,EAEJQ,EAAK,iBAAiB,SAAUG,CAAY,EAE5C,SAASA,EAAaC,EAAO,CAC3BP,IACAO,EAAM,eAAc,EACpBF,EAAO,UAAU,IAAI,QAAQ,EAE7B,MAAMG,EAAgBJ,EAAM,MAAM,KAAI,EAChCb,EAAO,EAEb,GAAIiB,IAAkB,GAAI,CACxBC,EAAS,MAAM,CACb,SAAU,WACV,QAAS,uBACf,CAAK,EACDJ,EAAO,UAAU,OAAO,QAAQ,EAChC,MACD,CAEDhB,EAAoBmB,EAAejB,CAAI,EACpC,KAAKE,GAAQ,CACZ,GAAIA,EAAK,QAAU,EAAG,CACpBgB,EAAS,MAAM,CACb,SAAU,WACV,QAAS,0EACnB,CAAS,EACDJ,EAAO,UAAU,OAAO,QAAQ,EAChC,MACR,MACQT,EAAaH,CAAI,EACjBgB,EAAS,QAAQ,CACf,SAAU,WACV,QAAS,SAAShB,EAAK,KAAK,UACtC,CAAS,EAEIE,EAGHA,EAAS,QAAO,EAFhBA,EAAWM,EAAY,CAKjC,CAAK,EACA,MAAMP,GAAS,CACde,EAAS,MAAM,CACb,SAAU,WACV,QAAS,sBAAsBf,EAAM,OAAO,EACpD,CAAO,CACP,CAAK,EACA,QAAQ,IAAM,CACbW,EAAO,UAAU,OAAO,QAAQ,CACtC,CAAK,CACL,CAEAV,EAAWM,EAAc"}